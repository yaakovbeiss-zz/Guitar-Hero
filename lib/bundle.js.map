{"version":3,"sources":["webpack:///webpack/bootstrap c8b282809d8e36289687","webpack:///./lib/entry.js","webpack:///./lib/button.js","webpack:///./lib/channel.js","webpack:///./lib/note.js","webpack:///./lib/soundGenerator.js","webpack:///./lib/modal.js","webpack:///./lib/songs.js","webpack:///./lib/guitar.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACgC;AAChB;;AAEhB;;;;;AAKA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;;AAEP,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;;;;;;;ACzHH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,WAAW,sBAAsB,WAAW;AACjF;AACA;;AAEA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;ACjFA;;AAEA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,uFAAuF,WAAW;;AAElG;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC,WAAW;;AAE5C;AACA;AACA;AACA;AACA;;;;AAIA;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,OAAO;;AAE3B;AACA;AACA;AACA,+BAA+B,MAAM;AACrC,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;;AAEA;AACA;;;;;AAKA;;;;;;;;ACrDA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;ACVA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA,KAAK;AACL;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c8b282809d8e36289687","import Button from './button.js'\nimport Channel from './channel.js'\nimport SoundGenerator from './soundGenerator';\nimport Guitar from './guitar.js';\nimport { openModal, closeModal } from './modal';\nimport { SONGS } from './songs.js'\n\ndocument.addEventListener('DOMContentLoaded', ()=> {\n\n\n\n\n  let chooseSong = () => {\n    let trackNumber = parseInt(document.querySelector('input[name=\"track\"]:checked').value);\n\n    let track = SONGS[trackNumber].backtrack\n    let guitar = SONGS[trackNumber].guitar\n    let numCuts = SONGS[trackNumber].numCuts\n\n      let generator = new SoundGenerator(guitar, track);\n\n      generator.generateSounds(numCuts, ()=> {\n\n        let redButton = new Button('red');\n        let yellowButton = new Button('yellow');\n        let blueButton = new Button('blue');\n        let orangeButton = new Button('orange');\n        let greenButton = new Button('green');\n\n        let redChannel = new Channel('red')\n        let blueChannel = new Channel('blue')\n        let yellowChannel = new Channel('yellow')\n        let orangeChannel = new Channel('orange')\n        let greenChannel = new Channel('green')\n\n          let start = document.getElementById('start-button');\n          start.addEventListener('click', () => {\n            startGame();\n          })\n\n          let startGame = () => {\n            closeModal();\n\n            let song = generator.song;\n            window.crowd = generator.crowd;\n\n            let playlist = generator.playlist;\n\n            const guitar = new Guitar([\n              redChannel,\n              blueChannel,\n              yellowChannel,\n              orangeChannel,\n              greenChannel\n            ],\n              playlist\n            )\n\n              song.play();\n              crowd.play();\n              guitar.playSong();\n          }\n\n\n      window.addEventListener(\"keydown\", (e) => {\n\n        switch (e.keyCode) {\n          case 65:\n            greenButton.pressButton(greenChannel.notes[0], greenChannel.aligned());\n            break\n          case 83:\n            redButton.pressButton(redChannel.notes[0], redChannel.aligned());\n            break\n          case 68:\n            yellowButton.pressButton(yellowChannel.notes[0], yellowChannel.aligned());\n            break;\n          case 70:\n            blueButton.pressButton(blueChannel.notes[0], blueChannel.aligned());\n            break;\n          case 71:\n            orangeButton.pressButton(orangeChannel.notes[0], orangeChannel.aligned());\n            break;\n          case 32:\n            // startGame();\n            break;\n          default:\n            console.log('no button here')\n        }\n\n      })\n      window.addEventListener(\"keyup\", (e) => {\n        switch (e.keyCode) {\n          case 65:\n            greenButton.unpressButton(greenChannel.notes[0]);\n            break\n          case 83:\n            redButton.unpressButton(redChannel.notes[0]);\n            break\n          case 68:\n            yellowButton.unpressButton(yellowChannel.notes[0]);\n            break;\n          case 70:\n            blueButton.unpressButton(blueChannel.notes[0]);\n            break;\n          case 71:\n            orangeButton.unpressButton(orangeChannel.notes[0]);\n            break;\n          default:\n            console.log('no button here')\n        }\n\n      })\n\n      });\n    }\n    const choice = document.getElementById('choice');\n    choice.addEventListener('click', () => {\n      if( document.querySelector('input[name=\"track\"]:checked') ){\n        chooseSong();\n      }\n    })\n  })\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/entry.js\n// module id = 0\n// module chunks = 0","class Button {\n  constructor(color){\n    this.color = color;\n    this.pressed = false;\n    this.buttonClass = this.buttonClass.bind(this);\n    this.playShortNote = this.playShortNote.bind(this);\n    this.playLongNote = this.playLongNote.bind(this);\n  }\n\n  buttonClass(){\n    const pushed = this.pressed ? `${this.color}-pressed button` : `${this.color}-unpressed button `\n    return pushed;\n  }\n\n  unpressButton(note){\n    let button = document.getElementById(`${this.color}-button`);\n    this.pressed = false;\n    button.className = this.buttonClass();\n    if(note){\n      note.pressed = false;\n      if(note.length === 'long'){\n        note.sound.stop();\n      }\n    }\n  }\n\n  updateScore(points){\n    let score = document.getElementById('score');\n    let numScore = parseInt(score.innerText) + points;\n\n    score.innerText = numScore;\n    crowd._volume = numScore / 4000;\n    crowd.play();\n  }\n  controlCrowd(){\n    crowd.stop();\n    crowd._volume = crowd._volume / 2;\n    crowd.play();\n  }\n  playShortNote(note, aligned){\n    if(!note.sound.playing() && aligned){\n      note.sound.play();\n      this.updateScore(10);\n    } else if (!aligned){\n      missedSound.play();\n      this.controlCrowd();\n    }\n  }\n  playLongNote(note, aligned){\n    window.longNote = note;\n    this.updateScore(5)\n    if(!note.sound.playing() && aligned){\n      note.sound.play();\n    } else if (!aligned){\n      missedSound.play();\n      this.controlCrowd();\n    }\n  }\n\n  pressButton(note, aligned){\n    let button = document.getElementById(`${this.color}-button`)\n    this.pressed = true;\n    button.className = this.buttonClass();\n    if(note){\n      note.pressed = true;\n      const playNote = (note.length === 'long') ? this.playLongNote : this.playShortNote;\n      playNote(note, aligned);\n    } else {\n        missedSound.play()\n    }\n  }\n}\n\n\n\nlet missedSound = new Howl({\n  buffer: true,\n  html5: true,\n  src: ['https://s3.us-east-2.amazonaws.com/guitar-hero/missed_note.mp3']\n})\n\nexport default Button;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/button.js\n// module id = 1\n// module chunks = 0","import Note from './note.js';\n\nexport default class Channel{\n  constructor(color){\n    this.color = color;\n    this.canvas = document.getElementById(`${this.color}`)\n    this.targetPosition = 0;\n    this.playNotes = this.playNotes.bind(this);\n    this.notes = [];\n  }\n\n  // createChannels(){\n  //   let channels = [];\n  //   let redChannel = new Channel('red');\n  //   let blueChannel = new Channel('blue');\n  //   let yellowChannel = new Channel('yellow');\n  //   let orangeChannel = new Channel('orange');\n  //   let greenChannel = new Channel('green');\n  //   channels.push(redChannel, blueChannel, yellowChannel, orangeChannel, greenChannel);\n  //   return channels;\n  // }\n\n  playNotes(sound, doubleNote){\n\n    let note = new Note(sound, this.color, doubleNote);\n\n    this.notes.push(note);\n    const drawNote = (note.length === 'long') ? note.longNote : note.shortNote;\n\n    let timer = setInterval( ()=> {\n\n      drawNote(note);\n      note.pos += 1;\n      const eraseNote = (note.length === 'long') ? (note.sound.duration() * 1000) : 160;\n      if(note.pos > eraseNote){\n\n        this.notes.shift();\n        clearInterval(timer)\n      }\n    }, 10)\n\n  }\n\n  aligned() {\n    if(this.notes.length > 0){\n      let note = this.notes[0];\n      const eraseNote = (note.length === 'long') ? ( (note.sound.duration() / 3) * 130 ) : 160;\n      return (this.notes[0].pos > 110 && this.notes[0].pos < eraseNote)\n    }\n  }\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/channel.js\n// module id = 2\n// module chunks = 0","class Note{\n  constructor(sound, color, double){\n    this.sound = sound;\n    this.color = color;\n    this.double = double;\n    this.ctx = null;\n    this.pos = 0;\n    this.length = this.sound.duration() > 2.5 && this.sound.duration() < 5 ?  'long' : 'short';\n    this.pressed = false;\n    this.canvas = document.getElementById(`${this.color}`)\n    this.shortNote = this.shortNote.bind(this);\n    this.longNote = this.longNote.bind(this);\n  }\n\n  shortNote(note){\n    note.ctx = this.canvas.getContext('2d');\n\n    let image = new Image;\n\n    image.src = this.pressed ? `assets/images/greennotePressed.png` : `assets/images/${this.color}note.png`;\n\n    note.ctx.drawImage(image, 0, note.pos)\n    note.ctx.clearRect(0, note.pos - 5, 300, 10)\n  }\n\n  longNote(note){\n    note.ctx = this.canvas.getContext('2d');\n\n    let image = new Image;\n    image.src = `assets/images/${this.color}note.png`;\n\n    note.ctx.drawImage(image, 0, note.pos)\n    let length = ( (note.sound.duration() / 3) * 130 );\n    note.ctx.clearRect(0, note.pos - length, 300, 10)\n  }\n}\n\n\n\nexport default Note;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/note.js\n// module id = 3\n// module chunks = 0","class SoundGenerator{\n  constructor(url, backtrackUrl){\n    this.backtrackUrl = backtrackUrl;\n    this.song = null;\n    this.url = url;\n    this.playlist = [];\n    this.crowd = null;\n  }\n\n  generateSounds(n, callback){\n    let crowd = new Howl({\n      buffer: true,\n      html5: true,\n      loop: true,\n      volume: 0.0,\n      src: [\"https://s3.us-east-2.amazonaws.com/guitar-hero/crowd.mp3\"]\n    })\n    let song = new Howl({\n      buffer: true,\n      html5: true,\n      src: [this.backtrackUrl]\n    })\n\n      let k = 0;\n      for(let i = 0; i < n; i++) {\n\n        let sound = new Howl({\n          buffer: true,\n          html5: true,\n          src: [this.url + `(${i + 2}).wav`]\n        })\n\n        sound.on('load',() =>{\n          this.playlist[i] = sound\n          k += 1;\n\n          if (k === n && song.state() === \"loaded\" && crowd.state() === \"loaded\") {\n            this.song = song;\n            this.crowd = crowd;\n            console.log('callback being called')\n            callback()\n\n          }\n        })\n\n      }\n\n    }\n  }\n\n\n\n\nexport default SoundGenerator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/soundGenerator.js\n// module id = 4\n// module chunks = 0","export const openModal = () => {\n   const modal = document.getElementById('modal');\n   modal.className = '';\n}\n\nexport const closeModal = () => {\n  const modal = document.getElementById('modal');\n  const modalContainer = document.getElementById('modal-container');\n  modalContainer.className = 'hidden';\n  modal.className = 'hidden';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/modal.js\n// module id = 5\n// module chunks = 0","export const SONGS = {\n  1: { // I love rock and roll, timing * 984 and start song after 3500\n    guitar: `https://s3.us-east-2.amazonaws.com/guitar-hero/iloverockandrollupdated/0+`,\n    backtrack: `https://s3.us-east-2.amazonaws.com/guitar-hero/iloverockandrollupdated/iloverockandrollbackingtrack.mp3`,\n    numCuts: 85,\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/songs.js\n// module id = 6\n// module chunks = 0","\n\nclass Guitar{\n  constructor(channels, playlist){\n    this.channels = channels;\n    this.playlist = playlist;\n    this.doubleNote = false\n  }\n\n  playSong(){\n    let timing = 0;\n    setTimeout( () => {\n      for(let i = 0; i < this.playlist.length; i++){\n        setTimeout( ()=> {\n          let sound = this.playlist.shift();\n          switch ( Math.floor((Math.random() * 6) + 1 ) ) {\n            case 1:\n              this.channels[0].playNotes(sound);\n              break;\n            case 2:\n              this.channels[1].playNotes(sound);\n              break;\n            case 3:\n              this.channels[2].playNotes(sound);\n              break;\n            case 4:\n              this.channels[3].playNotes(sound);\n              break;\n            case 5:\n              this.channels[4].playNotes(sound);\n              break;\n            case 6:\n              let first = Math.floor((Math.random() * 5) + 1 )\n              let second = Math.floor((Math.random() * 5) + 1 )\n\n              this.channels[first].playNotes(sound);\n              this.channels[second].playNotes(sound);\n              this.doubleNote = true;\n              break;\n            default:\n              this.channels[0].playNotes(sound);\n          }\n\n        }, timing * 982)\n        timing += this.playlist[i].duration();\n      }\n    }, 3500)\n  }\n\n\n}\n\n// window.addEventListener(\"keydown\", (e) => {\n//\n//   switch (e.keyCode) {\n//     case 65:\n//       greenButton.pressButton(greenChannel.notes[0], greenChannel.aligned());\n//       break\n//     case 83:\n//       redButton.pressButton(redChannel.notes[0], redChannel.aligned());\n//       break\n//     case 68:\n//       yellowButton.pressButton(yellowChannel.notes[0], yellowChannel.aligned());\n//       break;\n//     case 70:\n//       blueButton.pressButton(blueChannel.notes[0], blueChannel.aligned());\n//       break;\n//     case 71:\n//       orangeButton.pressButton(orangeChannel.notes[0], orangeChannel.aligned());\n//       break;\n//     case 32:\n//       // startGame();\n//       break;\n//     default:\n//       console.log('no button here')\n//   }\n//\n// })\n// window.addEventListener(\"keyup\", (e) => {\n//   switch (e.keyCode) {\n//     case 65:\n//       greenButton.unpressButton(greenChannel.notes[0]);\n//       break\n//     case 83:\n//       redButton.unpressButton(redChannel.notes[0]);\n//       break\n//     case 68:\n//       yellowButton.unpressButton(yellowChannel.notes[0]);\n//       break;\n//     case 70:\n//       blueButton.unpressButton(blueChannel.notes[0]);\n//       break;\n//     case 71:\n//       orangeButton.unpressButton(orangeChannel.notes[0]);\n//       break;\n//     default:\n//       console.log('no button here')\n//   }\n\nexport default Guitar;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/guitar.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}